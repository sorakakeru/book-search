# 蔵書登録・検索スクリプト

蔵書登録と検索ができるPHP製のスクリプトです。

## 利用方法

PHP 8.2.26で動作検証しています。

### 設置方法

`/src`をリネームするなどしてフォルダごとサーバーにアップロードしてください。  
検索避けの`meta`タグは入れていますが、設置の際はディレクトリにBasic認証やIPアドレス制限をかけることをおすすめします。

`/fnc_inc/config.php`は設定ファイルです。ファイル名と検索結果1ページの表示件数を変更できます。  
蔵書はJSON形式で保存されます。ログ保存ファイル（初期値は`books.json`）の拡張子は`.json`にしてください。

### 蔵書検索について

「タイトル」「著者名」「出版社」が検索対象です。入力フィールドに何も入れず検索した場合は、全蔵書一覧が表示されます。

### 蔵書登録について

蔵書登録はCSV形式で一括登録、または手入力で1件ずつ登録できます。入力項目は下記です。

- ISBNコード（数字13桁）
- タイトル
- 著者名
- 出版社
- 電子書籍かどうか

#### CSV登録の場合

- 一度にアップロードできるCSVのファイルサイズは1MBまで
- 項目の順番は左から「ISBNコード」「タイトル」「著者名」「出版社」「電子書籍」
- ISBNコードが未入力の場合、0が13こ代入される
- タイトル・著者名・出版社名はそれぞれ255文字までが登録される（256文字以上は切り捨て）
- 電子書籍の場合は`1`、電子書籍でない場合は`0`を指定する

##### 留意事項

- 入力項目に`,`（カンマ）が存在する場合は、項目そのものを`"`（ダブルクオーテーション）で囲う
- 入力項目に`"`が存在する場合で項目そのものを`"`で囲っている場合は、さらに`"`で囲う

CSVデータの入力書式は`サンプルデータ.csv`をご参考ください。

#### 手入力の場合

- タイトルは入力必須
- 電子書籍にチェックが入っていない場合、ISBNコードの入力も必須
- 電子書籍にチェックが入っているかつISBNコードが未入力の場合、0が13こ代入される
- タイトル・著者名・出版社名はそれぞれ255文字までが登録される（256文字以上は切り捨て）

### 蔵書削除について

検索結果画面の各蔵書リストに「削除」という項目があるので、クリックすると登録内容が削除されます。

## スクショ

トップページ

![トップページ](https://github.com/user-attachments/assets/3e85c969-b117-430e-b519-333344e90aa4)

検索結果画面

![検索結果画面](https://github.com/user-attachments/assets/d0c898ab-40bb-4f7d-90b1-2f3ff3c68c9b)

登録画面

![登録画面](https://github.com/user-attachments/assets/52b0ee6f-b44b-4e76-8717-f3a1c3eb6956)

## ライセンス

蔵書登録・検索スクリプトはMITライセンスのもとで開発しています。詳細はLICENSEをご覧ください。

なお、本スクリプトではテンプレートエンジンにTwigを利用しています。Twigのライセンスは3条項 BSDライセンス（BSD-3-Clause License）のもとで開発されています。詳細はLICENSE_TWIGをご覧ください。
